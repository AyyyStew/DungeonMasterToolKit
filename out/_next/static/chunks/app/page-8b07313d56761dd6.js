(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4245:function(e,t,l){Promise.resolve().then(l.bind(l,3269)),Promise.resolve().then(l.bind(l,9015))},3269:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7437),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2265),next_image__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(6648);let DiceRoller=()=>{let[input,setInput]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(""),[results,setResults]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),[allCollapsed,setAllCollapsed]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!0),[inputError,setInputError]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(""),rollDice=(e,t)=>{let l=[];for(let n=0;n<t;n++)l.push(Math.floor(Math.random()*e)+1);return l},evaluateExpression=expression=>{let match;let steps=[],diceRegex=/(\d+)d\(([^)]+)\)/g,modifiedExpression=expression,allRolls=[],formattedRolls=[];for(;null!==(match=diceRegex.exec(expression));){let[fullMatch,numDice,innerExpression]=match,innerResult=eval(innerExpression);steps.push("Evaluate inner expression: ".concat(innerExpression," => ").concat(innerResult));let rolls=rollDice(innerResult,Number(numDice));allRolls=allRolls.concat(rolls),formattedRolls=formattedRolls.concat(rolls.map(e=>formatRoll(e,innerResult)));let sumOfRolls=rolls.reduce((e,t)=>e+t,0);steps.push("".concat(fullMatch," => [").concat(formatRolls(rolls,innerResult),"] => ").concat(sumOfRolls)),modifiedExpression=modifiedExpression.replace(fullMatch,sumOfRolls.toString())}let finalDiceRegex=/(\d+)d(\d+)/g;for(;null!==(match=finalDiceRegex.exec(modifiedExpression));){let[fullMatch,numDice,numSides]=match,rolls=rollDice(Number(numSides),Number(numDice));allRolls=allRolls.concat(rolls),formattedRolls=formattedRolls.concat(rolls.map(e=>formatRoll(e,Number(numSides))));let sumOfRolls=rolls.reduce((e,t)=>e+t,0);steps.push("".concat(fullMatch," => [").concat(formatRolls(rolls,Number(numSides)),"] => ").concat(sumOfRolls)),modifiedExpression=modifiedExpression.replace(fullMatch,sumOfRolls.toString())}let finalResult=eval(modifiedExpression);return steps.push("Final expression: ".concat(modifiedExpression," => ").concat(finalResult)),{expression,rolls:allRolls,formattedRolls:formattedRolls,result:finalResult,steps}},formatRolls=(e,t)=>e.map(e=>formatRoll(e,t)).join(", "),formatRoll=(e,t)=>{let l=t;return 1===e?"<span class='text-red-600 font-semibold'>".concat(e,"</span>"):e===l?'<span class="text-emerald-400 font-semibold">'.concat(e,"</span>"):e.toString()};function isValidDiceExpression(e){return/^(?!\s*$)(?:(?:\d+d\d+|\d+|[\d()+\-*/%d\s])*)$/.test(e)}let validateInput=()=>""===input||null===input?(setInputError("Input cannot be empty."),!1):isValidDiceExpression(input)?(setInputError(""),!0):(setInputError("Invalid dice expression."),!1),handleRoll=()=>{validateInput()&&setResults([...results,evaluateExpression(input)])},toggleCollapse=()=>{setAllCollapsed(!allCollapsed)},handleCommonRoll=e=>{""===input?setInput(e):setInput("".concat(input," + ").concat(e)),setInputError("")},diceExpressions=["1d4","1d6","1d8","1d10","1d12","1d20","1d100"],diceSvgs=["/d4.svg","/d6.svg","/d8.svg","/d10.svg","/d12.svg","/d20.svg","/d100.svg"],buttonStyles=["bg-gradient-to-r from-pink-700 from-10% to-pink-500","bg-gradient-to-r from-red-700 from-10% to-red-500","bg-gradient-to-r from-yellow-700 from-10% to-yellow-500","bg-gradient-to-r from-green-700 from-10% to-green-500","bg-gradient-to-r from-blue-700 from-10% to-blue-500","bg-gradient-to-r from-indigo-700 from-10% to-indigo-500","bg-gradient-to-r from-purple-700 from-10% to-purple-500"];return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("section",{className:"card bg-gradient-dark w-full max-w-5xl p-6 shadow",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"mb-4 flex align-baseline",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(next_image__WEBPACK_IMPORTED_MODULE_2__.default,{className:"mr-3",src:"./d20.svg",alt:"a four sided dice",width:25,height:25}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h2",{className:"text-gradient text-2xl font-semibold",children:"Dice Roller"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"mb-4 grid grid-cols-[1fr] gap-2 sm:grid-cols-[9fr_1fr]",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{type:"text",value:input,onChange:e=>setInput(e.target.value),placeholder:"Enter dice expression (e.g., 2d8 + 4d6 * 2)",className:"input-field w-full rounded text-center shadow"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{onClick:handleRoll,className:"duration-400 button blue-button justify-self-center rounded-lg px-6 py-3 font-semibold",children:"Roll"})]}),inputError&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-center text-red-500",children:inputError}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"mb-4 flex flex-wrap justify-center space-x-2",children:diceExpressions.map((e,t)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"button mb-2 flex ".concat(buttonStyles[t]," w-max rounded-lg px-4 py-2"),onClick:()=>handleCommonRoll(e),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{children:e}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(next_image__WEBPACK_IMPORTED_MODULE_2__.default,{className:"ml-2",src:diceSvgs[t],alt:"a four sided dice",width:20,height:20})]},e))}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"max-w-[100vw] overflow-x-auto",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text- mb-2 text-white",children:"Click the button to toggle calculation details"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"flex flex-row-reverse justify-end gap-3 pb-4 text-white shadow",children:results.map((e,t)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{onClick:toggleCollapse,className:"button card card w-75 card-gradient min-w-[100px] max-w-[250px] flex-none rounded-md p-4 ".concat(t===results.length-1?"selected":""),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p",{className:"text-xl font-semibold",children:["Result: ",e.result]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p",{className:"font-normal",children:["Rolls:"," ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{dangerouslySetInnerHTML:{__html:e.formattedRolls.join(", ")}})]}),!allCollapsed&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("h2",{className:"text-lg",children:["Expression: ",e.expression]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("ul",{className:"mt-2 list-inside list-disc",children:e.steps.map((e,t)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("li",{dangerouslySetInnerHTML:{__html:e}},t))})]})]},t))})]})]})};__webpack_exports__.default=DiceRoller},9015:function(e,t,l){"use strict";l.d(t,{default:function(){return c}});var n=l(7437),a=l(2265);function s(){let[e,t]=(0,a.useState)([]),[l,n]=(0,a.useState)(""),[s,r]=(0,a.useState)(""),[i,d]=(0,a.useState)(0),[o,c]=(0,a.useState)(0),[u,m]=(0,a.useState)(0),[x,h]=(0,a.useState)(!1),[f,g]=(0,a.useState)(null),[p,b]=(0,a.useState)(null);(0,a.useEffect)(()=>{0===e.length?b(null):p&&!e.some(e=>e.id===p)&&b(e[0].id)},[e,p]);let j=()=>{if(null!==f){let n=[...e],a=n.findIndex(e=>e.id===f);-1!==a&&(n[a]={id:f,initiative:i,name:l,notes:s,hp:o,armor:u},t(n),g(null))}else{let n={id:new Date().toISOString(),initiative:i,name:l,notes:s,hp:o,armor:u};t([...e,n]),0===e.length&&b(n.id)}n(""),d(0),r(""),c(0),m(0)},v=t=>{let l=e.find(e=>e.id===t);l&&(n(l.name),r(l.notes),d(l.initiative),c(l.hp),m(l.armor),g(t))},N=()=>{t([...e].sort((e,t)=>t.initiative-e.initiative)),h(!0)},w=l=>{let n=e.filter(e=>e.id!==l),a=e.findIndex(e=>e.id===l);t(n);let s=a+1>=e.length?null:e[a+1].id;p===l&&b(n.length>0?s:null),f===l&&g(null)},C=(l,n,a)=>{t(e.map(e=>e.id===l?{...e,[n]:"initiative"===n||"hp"===n||"armor"===n?Number(a):a}:e))},y=()=>{if(!p||0===e.length)return;let t=(e.findIndex(e=>e.id===p)+1)%e.length;b(e[t].id)},S=()=>{if(!p||0===e.length)return;let t=(e.findIndex(e=>e.id===p)-1+e.length)%e.length;b(e[t].id)};return{characters:e,name:l,notes:s,initiative:i,hp:o,armor:u,isSorted:x,editId:f,currentCharacterId:p,setName:n,setNotes:r,setInitiative:d,setHp:c,setArmor:m,handleAddCharacter:j,handleEditCharacter:v,handleSortCharacters:N,handleDeleteCharacter:w,handleChangeCharacter:C,handleNextTurn:y,handlePreviousTurn:S}}let r=e=>{let{label:t,type:l,placeholder:a,value:s,onChange:r,maxLength:i}=e;return(0,n.jsxs)("div",{className:"card flex flex-col items-center border border-neutral-700 px-1 shadow",children:[(0,n.jsx)("span",{className:"my-1 self-start text-xs font-semibold",children:t}),(0,n.jsx)("input",{type:l,placeholder:a,value:s,onChange:e=>r("number"===l?Number(e.target.value):e.target.value),className:"input-field w-full min-w-12 bg-neutral-900 text-center font-normal",maxLength:i})]})};var i=e=>{let{character:t,position:l,onFieldChange:a}=e;return t||(t={hp:0,armor:0,name:"Empty",id:"",initiative:0,notes:""},a=()=>{}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-sm font-semibold",children:l}),(0,n.jsxs)("div",{className:"flex items-center rounded-lg bg-neutral-800 px-2 py-1 text-white shadow",children:[(0,n.jsx)("div",{className:"ml-3 mr-3 text-lg",children:t.name}),(0,n.jsxs)("div",{className:"flex gap-1",children:[(0,n.jsx)(r,{label:"HP",type:"number",placeholder:"HP",value:t.hp,onChange:e=>a("hp",e),maxLength:2}),(0,n.jsx)(r,{label:"Armor",type:"number",placeholder:"Armor",value:t.armor,onChange:e=>a("armor",e),maxLength:2})]})]})]})},d=e=>{let{character:t,isCurrent:l,editId:a,fields:s,order:i,onFieldChange:d,onDelete:o,onSubmit:c}=e;return(0,n.jsxs)("div",{className:"grid-item ".concat(l?"selected":""," shadow"),children:[(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)("div",{className:"card mx-1 max-w-[25%]",children:(0,n.jsxs)("span",{className:"font-bold",children:["#",i]})}),(0,n.jsx)(r,{label:"Init",type:"number",placeholder:"Initiative",value:s.initiative,onChange:e=>d("initiative",e),maxLength:2}),(0,n.jsx)(r,{label:"HP",type:"number",placeholder:"HP",value:s.hp,onChange:e=>d("hp",e),maxLength:3}),(0,n.jsx)(r,{label:"Armor",type:"number",placeholder:"Armor",value:s.armor,onChange:e=>d("armor",e),maxLength:2})]}),(0,n.jsxs)("div",{className:"card flex flex-col items-center border border-neutral-700 px-1",children:[(0,n.jsx)("span",{className:"mx-1 my-1 self-start text-xs font-semibold",children:"Name"}),(0,n.jsx)("input",{type:"text",placeholder:"Character Name",value:s.name,onChange:e=>d("name",e.target.value),className:"input-field input-field mx-2 w-full bg-neutral-900 !text-left"})]}),(0,n.jsxs)("div",{className:"card flex flex-col items-center border border-neutral-700 px-1",children:[(0,n.jsx)("span",{className:"mx-1 my-1 self-start text-xs font-semibold",children:"Notes"}),(0,n.jsx)("textarea",{placeholder:"Notes",value:s.notes,rows:1,onChange:e=>d("notes",e.target.value),className:"input-field input-field mx-2 w-full bg-neutral-900 !text-left"})]}),t?(0,n.jsx)("button",{className:"button blue-button ml-1",onClick:o,children:"Delete"}):(0,n.jsx)("button",{className:"button red-button ml-1",onClick:c,children:"Add Character"})]})};function o(e,t){return{currentCharacter:e[t%e.length]||null,nextCharacter:e[(t+1)%e.length]||null,nextNextCharacter:e[(t+2)%e.length]||null}}function c(){let{characters:e,name:t,notes:l,initiative:r,hp:c,armor:u,editId:m,currentCharacterId:x,setName:h,setNotes:f,setInitiative:g,setHp:p,setArmor:b,handleAddCharacter:j,handleDeleteCharacter:v,handleSortCharacters:N,handleChangeCharacter:w}=s(),[C,y]=(0,a.useState)(1),[S,k]=(0,a.useState)(0),{currentCharacter:I,nextCharacter:_,nextNextCharacter:E}=o(e,S);(0,a.useEffect)(()=>{e.length>0&&!x&&k(0)},[e,x]);let L=t=>{if(e.length>0){let l=(S+t+e.length)%e.length;k(l),0===l&&y(C+(1===t?1:-1))}},P=(e,t)=>{if(m)w(m,e,t);else switch(e){case"name":h(t);break;case"notes":f(t);break;case"initiative":g(t);break;case"hp":p(t);break;case"armor":b(t)}};return(0,n.jsxs)("section",{className:"card bg-gradient-dark w-full max-w-5xl p-6 shadow",children:[(0,n.jsxs)("section",{className:"mb-2 flex flex-wrap items-baseline justify-between gap-2",children:[(0,n.jsx)("h2",{className:"text-gradient mb-2 text-2xl font-semibold",children:"Initiative Tracker"}),(0,n.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,n.jsx)("button",{className:"button red-button w-full p-2",onClick:()=>L(-1),children:"Previous Turn"}),(0,n.jsx)("button",{className:"button grey-button w-full p-2",onClick:N,children:"Sort by Initiative"}),(0,n.jsx)("button",{className:"button blue-button w-full p-2",onClick:()=>L(1),children:"Next Turn"})]})]}),(0,n.jsx)("section",{className:"mb-4 font-semibold text-white",children:(0,n.jsx)("div",{children:(0,n.jsxs)("section",{className:"mb-4",children:[(0,n.jsxs)("div",{children:["Round: ",C]}),(0,n.jsx)("div",{className:"flex gap-2 overflow-x-auto",children:[I,_,E].map((e,t)=>(0,n.jsx)(i,{character:e,position:0===t?"Current":1===t?"Next":"On Deck",onFieldChange:(t,l)=>w(e.id,t,l)},t))})]})})}),(0,n.jsxs)("section",{children:[(0,n.jsx)("div",{className:"font-semibold text-white",children:(0,n.jsx)("h4",{children:"Add Characters"})}),e.map((e,t)=>(0,n.jsx)(d,{character:e,isCurrent:e.id===(null==I?void 0:I.id),fields:e,order:t+1,onFieldChange:(t,l)=>w(e.id,t,l),onDelete:()=>v(e.id),onSubmit:()=>null},e.id)),(0,n.jsx)(d,{editId:m,fields:{name:t,notes:l,initiative:r,hp:c,armor:u},order:e.length+1,onFieldChange:P,onSubmit:j})]})]})}}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[648,971,23,744],function(){return t(4245)}),_N_E=e.O()}]);